(function(e){function t(t){for(var r,i,s=t[0],l=t[1],c=t[2],d=0,g=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&g.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(g.length)g.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-main",[n("router-view")],1)],1)},o=[],i={name:"App",components:{},data:function(){return{}},methods:{}},s=i,l=n("2877"),c=n("6544"),u=n.n(c),d=n("7496"),g=n("f6c4"),v=Object(l["a"])(s,a,o,!1,null,null,null),m=v.exports;u()(v,{VApp:d["a"],VMain:g["a"]});var p=n("8c4f"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Header"),n("div",{staticClass:"text-center"},[e._v(" Home ")]),n("Footer")],1)},h=[],b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app-bar",{attrs:{app:"",color:"#F66156",flat:"","elevate-on-scroll":""}},[n("v-avatar",{staticClass:"d-flex align-center",attrs:{dark:""},on:{click:e.home}},[n("v-icon",{attrs:{"x-large":"",dark:""}},[e._v("mdi-stethoscope")])],1),n("v-spacer"),n("v-btn",{attrs:{text:""}},[n("Login",{attrs:{isSignIn:e.isSignIn},on:{signIn:e.signIn,signOut:e.signOut}})],1)],1)},_=[],x=(n("b0c0"),n("caad"),n("2532"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isSignIn?[n("div",[n("div",{staticClass:"text-center"},[n("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[e.image?n("v-avatar",e._g(e._b({staticClass:"d-flex align-center"},"v-avatar",a,!1),r),[n("img",{attrs:{src:e.image,alt:"User"}}),e._t("default")],2):e._e()]}}],null,!0)},[n("v-card",{attrs:{width:"200px"}},[n("v-list",[n("v-list-item",{attrs:{link:""},on:{click:e.logout}},[n("v-btn",{staticClass:"d-flex align-center",attrs:{text:""}},[n("v-icon",[e._v("mdi-logout")])],1),n("v-list-item-title",[e._v(" Logout ")])],1)],1)],1)],1)],1)])]:[n("v-dialog",{attrs:{"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[n("div",[n("v-btn",e._g(e._b({staticClass:"d-flex align-center",attrs:{dark:"",outlined:""}},"v-btn",a,!1),r),[e._v(" Login ")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-tabs",{attrs:{dark:"","background-color":"#7E4875",grow:"",flat:"","slider-color":"#ED7B22"}},[n("v-tab",[e._v(" Login ")]),n("v-tab-item",[n("v-card-title",{staticClass:"justify-center text-h4"},[n("v-icon",{attrs:{"x-large":"",color:"primary"}},[e._v("mdi-account-circle-outline")])],1),n("v-slide-x-transition",[e.errorM?n("div",[n("v-card-title",{staticClass:"justify-center text-h4"},[n("v-chip",{attrs:{color:"red",outlined:"",label:"",close:""},on:{"click:close":function(t){return e.removeError()}}},[e._v(" "+e._s(e.errorM))])],1)],1):e._e()]),n("v-container",{staticClass:"justify-center"},[n("v-row",{attrs:{justify:"center",align:"center",dense:""}},[n("v-col",{attrs:{cols:"auto"}},[n("v-chip",{staticClass:"ma-2",attrs:{color:"#f24b29",outlined:""},on:{click:function(t){return e.googleLogin()}}},[e._v(" Login with "),n("v-icon",{attrs:{right:"",color:"#f24b29"}},[e._v(" mdi-google ")])],1)],1),n("v-col",{attrs:{cols:"auto"}},[n("v-chip",{staticClass:"ma-2",attrs:{color:"primary",outlined:""}},[e._v(" Login with "),n("v-icon",{attrs:{right:""}},[e._v(" mdi-facebook ")])],1)],1)],1)],1)],1)],1)],1)],1)]],2)}),w=[],I=n("1da1"),k=(n("96cf"),n("bc3a")),S=n.n(k),V="https://colab-booking.herokuapp.com/api/login/",y=function(e,t){console.log(e,t),S.a.post(V,{name:e,email:t}).then((function(e){console.log(e)}))},C=y,O={name:"Login",props:{isSignIn:Boolean},data:function(){return{dialog:!1,errorM:"",user_image:""}},computed:{image:function(){return this.user_image}},methods:{googleLogin:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$gAuth.signIn();case 3:if(n=t.sent,n){t.next=6;break}return t.abrupt("return",null);case 6:r=n.getBasicProfile().getGivenName(),a=n.getBasicProfile().getEmail(),o=n.getBasicProfile().getImageUrl(),i={userName:r,userEmail:a,userImage:o},e.signIn(),s=JSON.stringify(i),localStorage.setItem("profile",s),l=JSON.parse(localStorage.getItem("profile")),e.user_image=l.userImage,C(r,a),console.log("googleUser name",r),console.log("googleUser email",a),console.log("googleUser image",o),e.dialog=!1,t.next=27;break;case 22:return t.prev=22,t.t0=t["catch"](0),console.error(t.t0),e.errorM=t.t0.error,t.abrupt("return",null);case 27:case"end":return t.stop()}}),t,null,[[0,22]])})))()},logout:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.signOut(),t.prev=1,t.next=4,e.$gAuth.signOut();case 4:console.log("isSignIn",e.isSignIn),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.error(t.t0);case 10:S.a.post("https://colab-booking.herokuapp.com/api/logout/",{withCredentials:!0}).then((function(t){console.log(t),e.removeItems()})).catch((function(t){console.log(t),e.removeItems()}));case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()},signIn:function(){this.$emit("signIn")},signOut:function(){this.$emit("signOut")},removeError:function(){this.errorM=""},removeItems:function(){localStorage.removeItem("profile")}},mounted:function(){if(localStorage.getItem("profile")){this.isSignIn=!0;var e=JSON.parse(localStorage.getItem("profile"));this.user_image=e.userImage}}},j=O,E=n("8212"),L=n("8336"),M=n("b0af"),T=n("99d9"),A=n("cc20"),F=n("62ad"),N=n("a523"),P=n("169a"),R=n("132d"),D=n("8860"),B=n("da13"),$=n("5d23"),H=n("e449"),J=n("0fd9"),q=n("0789"),U=n("71a3"),W=n("c671"),X=n("fe57"),G=Object(l["a"])(j,x,w,!1,null,null,null),Y=G.exports;u()(G,{VAvatar:E["a"],VBtn:L["a"],VCard:M["a"],VCardTitle:T["b"],VChip:A["a"],VCol:F["a"],VContainer:N["a"],VDialog:P["a"],VIcon:R["a"],VList:D["a"],VListItem:B["a"],VListItemTitle:$["a"],VMenu:H["a"],VRow:J["a"],VSlideXTransition:q["d"],VTab:U["a"],VTabItem:W["a"],VTabs:X["a"]});var z={name:"Header",components:{Login:Y},data:function(){return{isSignIn:!1}},methods:{home:function(){Se.push({path:"/"}).catch((function(e){"NavigationDuplicated"===e.name||e.message.includes("Avoided redundant navigation to current location")||logError(e)}))},signIn:function(){this.isSignIn=!0},signOut:function(){this.isSignIn=!1}}},K=z,Q=n("40dc"),Z=n("2fa4"),ee=Object(l["a"])(K,b,_,!1,null,null,null),te=ee.exports;u()(ee,{VAppBar:Q["a"],VAvatar:E["a"],VBtn:L["a"],VIcon:R["a"],VSpacer:Z["a"]});var ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-footer",{attrs:{dark:"",padless:"",app:""}},[n("v-card",{staticClass:"flex footer",attrs:{flat:"",tile:"",color:"#CCF2EF"}},[n("v-card-text",{staticClass:"py-2 white--text text-center footer"},[e._v(" "+e._s((new Date).getFullYear())+" â€” "),n("strong",[e._v("A.I Dev")]),n("v-btn",{staticClass:"mx-4",attrs:{color:"white",icon:"",href:"https://github.com/akadiving/booking-project",target:"_blank"}},[n("v-icon",{attrs:{"x-large":""}},[e._v(" mdi-github ")])],1)],1)],1)],1)},re=[],ae={name:"Footer"},oe=ae,ie=(n("68b3"),n("553a")),se=Object(l["a"])(oe,ne,re,!1,null,null,null),le=se.exports;u()(se,{VBtn:L["a"],VCard:M["a"],VCardText:T["a"],VFooter:ie["a"],VIcon:R["a"]});var ce={name:"Home",components:{Header:te,Footer:le}},ue=ce,de=Object(l["a"])(ue,f,h,!1,null,null,null),ge=de.exports,ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-center",attrs:{id:"admin"}},[e.isSignIn?n("div",[e._v(" "+e._s(e.name)+" "),n("v-btn",{on:{click:e.logout}},[e._v(" Logout ")]),n("v-btn",{attrs:{color:"#1F7087",outlined:""},on:{click:e.home}},[n("v-icon",[e._v(" mdi-home ")]),e._v(" Home ")],1)],1):n("div",[n("v-dialog",{attrs:{"max-width":"290",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-tabs",{attrs:{dark:"","background-color":"#7E4875",grow:"",flat:"","slider-color":"#ED7B22"}},[n("v-tab",[e._v(" Login ")]),n("v-tab-item",[n("v-card-title",{staticClass:"justify-center text-h4"},[n("v-icon",{attrs:{"x-large":"",color:"#1F7087"}},[e._v("mdi-account-circle-outline")])],1),n("v-slide-x-transition",[e.errorM?n("div",[n("v-card-title",{staticClass:"justify-center text-h4"},[n("v-chip",{attrs:{color:"red",outlined:"",label:"",close:""},on:{"click:close":function(t){return e.removeError()}}},[e._v(" "+e._s(e.errorM))])],1)],1):e._e()]),n("v-form",{ref:"loginform",model:{value:e.validLogin,callback:function(t){e.validLogin=t},expression:"validLogin"}},[n("v-container",{staticClass:"justify-center"},[n("v-row",{attrs:{justify:"center",align:"center",dense:""}},[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{rules:e.emailRules,placeholder:"Email",name:"email","prepend-inner-icon":"mdi-account",outlined:"",clearable:"",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{rules:e.passwordRules,name:"password",placeholder:"Password","prepend-inner-icon":"mdi-lock",outlined:"",clearable:"",type:"password",required:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-divider"),n("v-col",{attrs:{cols:"auto"}},[n("v-btn",{attrs:{color:"#1F7087",outlined:"",block:"",disabled:!e.validLogin},on:{click:e.login}},[e._v(" Login ")])],1),n("v-col",{attrs:{cols:"auto"}},[n("v-btn",{attrs:{color:"#1F7087",outlined:"",block:""},on:{click:e.home}},[n("v-icon",[e._v(" mdi-home ")]),e._v(" Home ")],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)])},me=[],pe={name:"Admin",props:{},components:{},data:function(){return{name:"",dialog:!0,errorM:"",isSignIn:!1,password:"",email:"",validLogin:!0,passwordRules:[function(e){return!!e||"Password is required"}],emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}]}},methods:{login:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{n="https://colab-booking.herokuapp.com/api/admin/login/",S.a.post(n,{email:e.email,password:e.password}).then((function(t){console.log(t),"admin"===t.data.name&&(e.isSignIn=!0,e.dialog=!1,e.setWithExpiry("admin",t.data.name,36e5),e.name=e.getName("admin"))})).catch((function(t){console.log(t),e.errorM="Wrong credentials",e.isSignIn=!1,e.dialog=!0}))}catch(r){console.error(r),e.errorM=r.data,e.isSignIn=!1,e.dialog=!0}case 1:case"end":return t.stop()}}),t)})))()},logout:function(){localStorage.removeItem("admin"),this.isSignIn=!1,this.dialog=!0,this.email="",this.password="",this.errorM=""},home:function(){Se.push({path:"/"}).catch((function(e){"NavigationDuplicated"===e.name||e.message.includes("Avoided redundant navigation to current location")||logError(e)}))},removeError:function(){this.errorM=""},setWithExpiry:function(e,t,n){var r=new Date,a={value:t,expire:r.getTime()+n};localStorage.setItem(e,JSON.stringify(a))},getWithExpire:function(e){var t=localStorage.getItem(e);if(!t)return null;var n=JSON.parse(t),r=new Date;return r.getTime()>n.expire?(localStorage.removeItem(e),null):n.value},getName:function(e){var t=localStorage.getItem(e);if(!t)return null;var n=JSON.parse(t);new Date;return n.value}},mounted:function(){this.getWithExpire("admin")&&(this.isSignIn=!0,this.name=this.getName("admin"))}},fe=pe,he=n("ce7e"),be=n("4bd4"),_e=n("8654"),xe=Object(l["a"])(fe,ve,me,!1,null,"3ab0e7ff",null),we=xe.exports;u()(xe,{VBtn:L["a"],VCard:M["a"],VCardTitle:T["b"],VChip:A["a"],VCol:F["a"],VContainer:N["a"],VDialog:P["a"],VDivider:he["a"],VForm:be["a"],VIcon:R["a"],VRow:J["a"],VSlideXTransition:q["d"],VTab:U["a"],VTabItem:W["a"],VTabs:X["a"],VTextField:_e["a"]}),r["a"].use(p["a"]);var Ie=[{path:"/",name:"Home",component:ge},{path:"/admin",name:"Admin",component:we}],ke=new p["a"]({mode:"history",base:"/",routes:Ie}),Se=ke,Ve=(n("d3b7"),n("2f62"));r["a"].use(Ve["a"]);var ye=new Ve["a"].Store({state:{user:"",isAuthenticated:null},mutations:{isSignIn:function(e){e.isAuthenticated=!0}},getters:{user:function(e){return e.user},isAuthenticated:function(e){return e.isAuthenticated}},actions:{login:function(e,t,n){var r=e.commit;return new Promise((function(e,a){r("auth_request"),S.a.post(baseURL,{email:t,password:n}).then((function(t){console.log(t),r("isSignIn"),e(t)})).catch((function(e){r("auth_error"),localStorage.removeItem("profile"),a(e)}))}))}},modules:{}}),Ce=n("f309");r["a"].use(Ce["a"]);var Oe=new Ce["a"]({}),je=n("c9bf"),Ee={clientId:"960875974003-jv24891niccnmgqb4it2bko1d11r350m.apps.googleusercontent.com",scope:"profile email",prompt:"select_account"};r["a"].use(je["a"],Ee),r["a"].config.productionTip=!1,new r["a"]({router:Se,store:ye,vuetify:Oe,render:function(e){return e(m)}}).$mount("#app")},"68b3":function(e,t,n){"use strict";n("98b5")},"98b5":function(e,t,n){}});
//# sourceMappingURL=app.86744052.js.map