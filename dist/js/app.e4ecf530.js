(function(e){function t(t){for(var r,i,l=t[0],s=t[1],c=t[2],d=0,m=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,l=1;l<a.length;l++){var s=a[l];0!==n[s]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={app:0},o=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-main",[a("router-view")],1)],1)},o=[],i={name:"App",components:{},data:function(){return{}},methods:{}},l=i,s=a("2877"),c=a("6544"),u=a.n(c),d=a("7496"),m=a("f6c4"),g=Object(s["a"])(l,n,o,!1,null,null,null),v=g.exports;u()(g,{VApp:d["a"],VMain:m["a"]});var p=a("8c4f"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Header"),a("div",{staticClass:"text-center"},[e._v(" Home ")]),a("Footer")],1)},h=[],b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app-bar",{attrs:{app:"",color:"#F66156",flat:"","elevate-on-scroll":""}},[a("v-avatar",{staticClass:"d-flex align-center",attrs:{dark:""},on:{click:e.home}},[a("v-icon",{attrs:{"x-large":"",dark:""}},[e._v("mdi-stethoscope")])],1),a("v-spacer"),a("v-btn",{attrs:{text:""}},[a("Login")],1)],1)},_=[],x=(a("b0c0"),a("caad"),a("2532"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isSignIn?[a("div",[a("div",{staticClass:"text-center"},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[e.image?a("v-avatar",e._g(e._b({staticClass:"d-flex align-center"},"v-avatar",n,!1),r),[a("img",{attrs:{src:e.image,alt:"User"}}),e._t("default")],2):e._e()]}}],null,!0)},[a("v-card",{attrs:{width:"200px"}},[a("v-list",[a("v-list-item",{attrs:{link:""},on:{click:e.logout}},[a("v-btn",{staticClass:"d-flex align-center",attrs:{text:""}},[a("v-icon",[e._v("mdi-logout")])],1),a("v-list-item-title",[e._v(" Logout ")])],1)],1)],1)],1)],1)])]:[a("v-dialog",{attrs:{"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("div",[a("v-btn",e._g(e._b({staticClass:"d-flex align-center",attrs:{dark:"",outlined:""}},"v-btn",n,!1),r),[e._v(" Login ")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-tabs",{attrs:{dark:"","background-color":"#7E4875",grow:"",flat:"","slider-color":"#ED7B22"}},[a("v-tab",[e._v(" Login ")]),a("v-tab-item",[a("v-card-title",{staticClass:"justify-center text-h4"},[a("v-icon",{attrs:{"x-large":"",color:"primary"}},[e._v("mdi-account-circle-outline")])],1),a("v-slide-x-transition",[e.errorM?a("div",[a("v-card-title",{staticClass:"justify-center text-h4"},[a("v-chip",{attrs:{color:"red",outlined:"",label:"",close:""},on:{"click:close":function(t){return e.removeError()}}},[e._v(" "+e._s(e.errorM))])],1)],1):e._e()]),a("v-container",{staticClass:"justify-center"},[a("v-row",{attrs:{justify:"center",align:"center",dense:""}},[a("v-col",{attrs:{cols:"auto"}},[a("v-chip",{staticClass:"ma-2",attrs:{color:"#f24b29",outlined:""},on:{click:function(t){return e.googleLogin()}}},[e._v(" Login with "),a("v-icon",{attrs:{right:"",color:"#f24b29"}},[e._v(" mdi-google ")])],1)],1),a("v-col",{attrs:{cols:"auto"}},[a("v-chip",{staticClass:"ma-2",attrs:{color:"primary",outlined:""},on:{click:e.fbLogin}},[e._v(" Login with "),a("v-icon",{attrs:{right:""}},[e._v(" mdi-facebook ")])],1)],1)],1)],1)],1)],1)],1)],1)]],2)}),w=[],k=a("1da1"),I=(a("96cf"),a("bc3a")),S=a.n(I),y="https://colab-booking.herokuapp.com/api/login/",V=function(e,t){console.log(e,t),S.a.post(y,{name:e,email:t}).then((function(e){console.log(e)}))},C=V,O={name:"Login",components:{},props:{},data:function(){return{dialog:!1,errorM:"",user_image:"",isSignIn:!1}},computed:{image:function(){return this.user_image}},methods:{googleLogin:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var a,r,n,o,i,l,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$gAuth.signIn();case 3:if(a=t.sent,a){t.next=6;break}return t.abrupt("return",null);case 6:r=a.getBasicProfile().getGivenName(),n=a.getBasicProfile().getEmail(),o=a.getBasicProfile().getImageUrl(),i={userName:r,userEmail:n,userImage:o},l=JSON.stringify(i),localStorage.setItem("profile",l),s=JSON.parse(localStorage.getItem("profile")),e.user_image=s.userImage,C(r,n),console.log("googleUser name",r),console.log("googleUser email",n),console.log("googleUser image",o),e.dialog=!1,e.isSignIn=!0,t.next=27;break;case 22:return t.prev=22,t.t0=t["catch"](0),console.error(t.t0),e.errorM=t.t0.error,t.abrupt("return",null);case 27:case"end":return t.stop()}}),t,null,[[0,22]])})))()},fbLogin:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,FB.login((function(e){e.authResponse?(console.log(e),FB.api("/me?fields=id,first_name,email,picture",(function(e){console.log(e);var t={userName:e.first_name,userEmail:e.email,userImage:e.picture.data.url},a=JSON.stringify(t);localStorage.setItem("profile",a);var r=JSON.parse(localStorage.getItem("profile"));this.user_image=r.userImage,C(e.first_name,e.email)}))):console.log("User cancelled login or did not fully authorize.")}),e.dialog=!1,e.isSignIn=!0);case 2:case"end":return t.stop()}}),t)})))()},logout:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:S.a.post("https://colab-booking.herokuapp.com/api/logout/",{withCredentials:!0}).then((function(t){console.log(t),e.removeItems()})).catch((function(t){console.log(t),e.removeItems()})),e.isSignIn=!1;case 2:case"end":return t.stop()}}),t)})))()},removeError:function(){this.errorM=""},removeItems:function(){localStorage.removeItem("profile")}},mounted:function(){if(localStorage.getItem("profile")){this.isSignIn=!0;var e=JSON.parse(localStorage.getItem("profile"));this.user_image=e.userImage,console.log(this.user_image)}}},j=O,E=a("8212"),L=a("8336"),M=a("b0af"),T=a("99d9"),F=a("cc20"),N=a("62ad"),A=a("a523"),R=a("169a"),P=a("132d"),B=a("8860"),D=a("da13"),J=a("5d23"),H=a("e449"),$=a("0fd9"),U=a("0789"),q=a("71a3"),W=a("c671"),X=a("fe57"),z=Object(s["a"])(j,x,w,!1,null,null,null),G=z.exports;u()(z,{VAvatar:E["a"],VBtn:L["a"],VCard:M["a"],VCardTitle:T["b"],VChip:F["a"],VCol:N["a"],VContainer:A["a"],VDialog:R["a"],VIcon:P["a"],VList:B["a"],VListItem:D["a"],VListItemTitle:J["a"],VMenu:H["a"],VRow:$["a"],VSlideXTransition:U["d"],VTab:q["a"],VTabItem:W["a"],VTabs:X["a"]});var Y={name:"Header",components:{Login:G},data:function(){return{}},methods:{home:function(){Se.push({path:"/"}).catch((function(e){"NavigationDuplicated"===e.name||e.message.includes("Avoided redundant navigation to current location")||logError(e)}))}}},K=Y,Q=a("40dc"),Z=a("2fa4"),ee=Object(s["a"])(K,b,_,!1,null,null,null),te=ee.exports;u()(ee,{VAppBar:Q["a"],VAvatar:E["a"],VBtn:L["a"],VIcon:P["a"],VSpacer:Z["a"]});var ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-footer",{attrs:{dark:"",padless:"",app:""}},[a("v-card",{staticClass:"flex footer",attrs:{flat:"",tile:"",color:"#CCF2EF"}},[a("v-card-text",{staticClass:"py-2 white--text text-center footer"},[e._v(" "+e._s((new Date).getFullYear())+" â€” "),a("strong",[e._v("A.I Dev")]),a("v-btn",{staticClass:"mx-4",attrs:{color:"white",icon:"",href:"https://github.com/akadiving/booking-project",target:"_blank"}},[a("v-icon",{attrs:{"x-large":""}},[e._v(" mdi-github ")])],1)],1)],1)],1)},re=[],ne={name:"Footer"},oe=ne,ie=(a("68b3"),a("553a")),le=Object(s["a"])(oe,ae,re,!1,null,null,null),se=le.exports;u()(le,{VBtn:L["a"],VCard:M["a"],VCardText:T["a"],VFooter:ie["a"],VIcon:P["a"]});var ce={name:"Home",components:{Header:te,Footer:se}},ue=ce,de=Object(s["a"])(ue,f,h,!1,null,null,null),me=de.exports,ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center",attrs:{id:"admin"}},[e.isSignIn?a("div",[e._v(" "+e._s(e.name)+" "),a("v-btn",{on:{click:e.logout}},[e._v(" Logout ")]),a("v-btn",{attrs:{color:"#1F7087",outlined:""},on:{click:e.home}},[a("v-icon",[e._v(" mdi-home ")]),e._v(" Home ")],1)],1):a("div",[a("v-dialog",{attrs:{"max-width":"290",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-tabs",{attrs:{dark:"","background-color":"#7E4875",grow:"",flat:"","slider-color":"#ED7B22"}},[a("v-tab",[e._v(" Login ")]),a("v-tab-item",[a("v-card-title",{staticClass:"justify-center text-h4"},[a("v-icon",{attrs:{"x-large":"",color:"#1F7087"}},[e._v("mdi-account-circle-outline")])],1),a("v-slide-x-transition",[e.errorM?a("div",[a("v-card-title",{staticClass:"justify-center text-h4"},[a("v-chip",{attrs:{color:"red",outlined:"",label:"",close:""},on:{"click:close":function(t){return e.removeError()}}},[e._v(" "+e._s(e.errorM))])],1)],1):e._e()]),a("v-form",{model:{value:e.validLogin,callback:function(t){e.validLogin=t},expression:"validLogin"}},[a("v-container",{staticClass:"justify-center"},[a("v-row",{attrs:{justify:"center",align:"center",dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:e.emailRules,placeholder:"Email",name:"email","prepend-inner-icon":"mdi-account",outlined:"",clearable:"",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:e.passwordRules,name:"password",placeholder:"Password","prepend-inner-icon":"mdi-lock",outlined:"",clearable:"",type:"password",required:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-divider"),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{attrs:{color:"#1F7087",outlined:"",block:"",disabled:!e.validLogin},on:{click:e.login}},[e._v(" Login ")])],1),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{attrs:{color:"#1F7087",outlined:"",block:""},on:{click:e.home}},[a("v-icon",[e._v(" mdi-home ")]),e._v(" Home ")],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)])},ve=[],pe={name:"Admin",props:{},components:{},data:function(){return{name:"",dialog:!0,errorM:"",isSignIn:!1,password:"",email:"",validLogin:!0,passwordRules:[function(e){return!!e||"Password is required"}],emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}]}},methods:{login:function(){var e=this;try{var t="https://colab-booking.herokuapp.com/api/admin/login/";S.a.post(t,{email:this.email,password:this.password}).then((function(t){console.log(t),"admin"===t.data.name&&(e.isSignIn=!0,e.dialog=!1,e.setWithExpiry("admin",t.data.name,36e5),e.name=e.getName("admin"))})).catch((function(t){console.log(t),e.errorM="Wrong credentials",e.isSignIn=!1,e.dialog=!0}))}catch(a){console.error(a),this.errorM=a.data,this.isSignIn=!1,this.dialog=!0}},logout:function(){localStorage.removeItem("admin"),this.isSignIn=!1,this.dialog=!0,this.email="",this.password="",this.errorM=""},home:function(){Se.push({path:"/"}).catch((function(e){"NavigationDuplicated"===e.name||e.message.includes("Avoided redundant navigation to current location")||logError(e)}))},removeError:function(){this.errorM=""},setWithExpiry:function(e,t,a){var r=new Date,n={value:t,expire:r.getTime()+a};localStorage.setItem(e,JSON.stringify(n))},getWithExpire:function(e){var t=localStorage.getItem(e);if(!t)return null;var a=JSON.parse(t),r=new Date;return r.getTime()>a.expire?(localStorage.removeItem(e),null):a.value},getName:function(e){var t=localStorage.getItem(e);if(!t)return null;var a=JSON.parse(t);new Date;return a.value}},mounted:function(){this.getWithExpire("admin")&&(this.isSignIn=!0,this.name=this.getName("admin"),this.dialog=!1)}},fe=pe,he=a("ce7e"),be=a("4bd4"),_e=a("8654"),xe=Object(s["a"])(fe,ge,ve,!1,null,"7f3cd678",null),we=xe.exports;u()(xe,{VBtn:L["a"],VCard:M["a"],VCardTitle:T["b"],VChip:F["a"],VCol:N["a"],VContainer:A["a"],VDialog:R["a"],VDivider:he["a"],VForm:be["a"],VIcon:P["a"],VRow:$["a"],VSlideXTransition:U["d"],VTab:q["a"],VTabItem:W["a"],VTabs:X["a"],VTextField:_e["a"]}),r["a"].use(p["a"]);var ke=[{path:"/",name:"Home",component:me},{path:"/admin",name:"Admin",component:we}],Ie=new p["a"]({mode:"history",base:"/",routes:ke}),Se=Ie,ye=(a("d3b7"),a("2f62"));r["a"].use(ye["a"]);var Ve=new ye["a"].Store({state:{user:"",isAuthenticated:null},mutations:{isSignIn:function(e){e.isAuthenticated=!0}},getters:{user:function(e){return e.user},isAuthenticated:function(e){return e.isAuthenticated}},actions:{login:function(e,t,a){var r=e.commit;return new Promise((function(e,n){r("auth_request"),S.a.post(baseURL,{email:t,password:a}).then((function(t){console.log(t),r("isSignIn"),e(t)})).catch((function(e){r("auth_error"),localStorage.removeItem("profile"),n(e)}))}))}},modules:{}}),Ce=a("f309");r["a"].use(Ce["a"]);var Oe=new Ce["a"]({}),je=a("c9bf"),Ee={clientId:"960875974003-jv24891niccnmgqb4it2bko1d11r350m.apps.googleusercontent.com",scope:"profile email",prompt:"select_account"};r["a"].use(je["a"],Ee),r["a"].config.productionTip=!1,new r["a"]({router:Se,store:Ve,vuetify:Oe,render:function(e){return e(v)}}).$mount("#app")},"68b3":function(e,t,a){"use strict";a("98b5")},"98b5":function(e,t,a){}});
//# sourceMappingURL=app.e4ecf530.js.map